{
  "schemes": [],
  "swagger": "2.0",
  "info": {
    "description": "一个简单的记账系统 API，支持用户注册、登录、消费记录管理和数据导出功能",
    "title": "记账系统 API",
    "contact": {},
    "version": "1.0"
  },
  "host": "localhost:8080",
  "basePath": "/",
  "paths": {
    "/admin/ai-analysis": {
      "post": {
        "description": "选择时间范围和AI模型，对消费记录进行AI分析，SSE流式返回JSON帧（delta/done/error）。管理员可分析所有记录或指定用户的记录（通过user_id参数），非管理员只能分析自己的记录。分析结束后会保存到历史记录。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "text/event-stream"
        ],
        "tags": [
          "后台管理-AI分析"
        ],
        "summary": "AI分析消费记录（流式）",
        "parameters": [
          {
            "description": "分析请求（user_id字段仅管理员可用）",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AnalysisRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SSE流：data: {\\\"type\\\":\\\"delta\\\",\\\"content\\\":\\\"...\\\"}",
            "schema": {
              "type": "string"
            }
          },
          "400": {
            "description": "参数错误或该时间范围内没有消费记录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "AI模型不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/ai-analysis/history": {
      "get": {
        "description": "获取AI分析历史记录，按model_id分页返回（软删除不返回）",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-AI分析"
        ],
        "summary": "获取AI分析历史",
        "parameters": [
          {
            "type": "integer",
            "description": "AI模型ID",
            "name": "model_id",
            "in": "query",
            "required": true
          },
          {
            "type": "integer",
            "description": "页码，默认1",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "每页条数，默认20，最大100",
            "name": "page_size",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功，返回分页数据",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/ai-analysis/history/{id}": {
      "delete": {
        "description": "软删除指定的AI分析历史记录",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-AI分析"
        ],
        "summary": "删除AI分析历史",
        "parameters": [
          {
            "type": "integer",
            "description": "历史记录ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "无效的ID",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/ai-chat": {
      "post": {
        "description": "选择AI模型，与AI进行对话，SSE流式返回JSON帧（delta/done/error）。结束后保存聊天记录。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "text/event-stream"
        ],
        "tags": [
          "后台管理-AI聊天"
        ],
        "summary": "AI聊天（流式）",
        "parameters": [
          {
            "description": "聊天请求",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AIChatRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SSE流：data: {\\\"type\\\":\\\"delta\\\",\\\"content\\\":\\\"...\\\"}",
            "schema": {
              "type": "string"
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "AI模型不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/ai-chat/history": {
      "get": {
        "description": "获取AI聊天历史记录，按model_id分页返回（软删除不返回）",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-AI聊天"
        ],
        "summary": "获取AI聊天历史",
        "parameters": [
          {
            "type": "integer",
            "description": "AI模型ID",
            "name": "model_id",
            "in": "query",
            "required": true
          },
          {
            "type": "integer",
            "description": "页码，默认1",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "每页条数，默认20，最大100",
            "name": "page_size",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功，返回分页数据",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/ai-chat/history/{id}": {
      "delete": {
        "description": "软删除指定的AI聊天记录",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-AI聊天"
        ],
        "summary": "删除AI聊天记录",
        "parameters": [
          {
            "type": "integer",
            "description": "聊天记录ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "无效的ID",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/ai-models": {
      "get": {
        "description": "获取系统中所有AI模型配置列表（不包含APIKey）",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-AI模型"
        ],
        "summary": "获取AI模型列表",
        "responses": {
          "200": {
            "description": "获取成功，返回模型列表",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      },
      "post": {
        "description": "创建新的AI模型配置，包括名称、API地址和密钥",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-AI模型"
        ],
        "summary": "创建AI模型",
        "parameters": [
          {
            "description": "AI模型信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.CreateAIModelRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "创建成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误或模型名称已存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/ai-models/{id}": {
      "get": {
        "description": "根据ID获取AI模型配置详情（不包含APIKey）",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-AI模型"
        ],
        "summary": "获取单个AI模型",
        "parameters": [
          {
            "type": "integer",
            "description": "AI模型ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "无效的ID",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "模型不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      },
      "put": {
        "description": "更新指定的AI模型配置信息",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-AI模型"
        ],
        "summary": "更新AI模型",
        "parameters": [
          {
            "type": "integer",
            "description": "AI模型ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "更新的模型信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.UpdateAIModelRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误或模型名称已存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "模型不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      },
      "delete": {
        "description": "删除指定的AI模型配置（软删除）",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-AI模型"
        ],
        "summary": "删除AI模型",
        "parameters": [
          {
            "type": "integer",
            "description": "AI模型ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "无效的ID",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "模型不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/categories": {
      "get": {
        "description": "获取所有消费类别列表，支持按名称模糊搜索",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-消费类别"
        ],
        "summary": "获取消费类别列表",
        "parameters": [
          {
            "type": "string",
            "description": "类别名称（模糊匹配）",
            "name": "name",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功，返回类别列表",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      },
      "post": {
        "description": "创建新的消费类别，支持设置名称、排序和颜色",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-消费类别"
        ],
        "summary": "创建消费类别",
        "parameters": [
          {
            "description": "类别信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.CategoryCreateRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "创建成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误或类别名称已存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/categories/{id}": {
      "put": {
        "description": "更新指定的消费类别信息",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-消费类别"
        ],
        "summary": "更新消费类别",
        "parameters": [
          {
            "type": "integer",
            "description": "类别ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "更新的类别信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.CategoryUpdateRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误或类别名称已存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "类别不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      },
      "delete": {
        "description": "软删除指定的消费类别",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-消费类别"
        ],
        "summary": "删除消费类别",
        "parameters": [
          {
            "type": "integer",
            "description": "类别ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "无效的ID",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "类别不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/email-config": {
      "get": {
        "description": "获取邮件服务配置信息（邮箱地址会被部分隐藏）",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-密码重置"
        ],
        "summary": "获取邮件配置状态",
        "responses": {
          "200": {
            "description": "获取成功，返回邮件配置信息",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/expenses": {
      "get": {
        "description": "获取消费记录列表，支持分页、时间范围、类别、用户名筛选。管理员可查看所有记录并可按用户ID筛选，非管理员只能查看自己的记录。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-消费记录"
        ],
        "summary": "获取消费记录列表",
        "parameters": [
          {
            "type": "integer",
            "description": "页码，默认1",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "每页数量，默认20",
            "name": "page_size",
            "in": "query"
          },
          {
            "type": "string",
            "description": "开始时间 (YYYY-MM-DD)",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "结束时间 (YYYY-MM-DD)",
            "name": "end_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "类别筛选",
            "name": "category",
            "in": "query"
          },
          {
            "type": "string",
            "description": "用户名筛选（模糊匹配）",
            "name": "username",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "用户ID筛选（仅管理员可用）",
            "name": "user_id",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功，返回分页数据",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      },
      "post": {
        "description": "创建一条新的消费记录。管理员可以为任何用户创建，非管理员只能为自己创建。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-消费记录"
        ],
        "summary": "创建消费记录",
        "parameters": [
          {
            "description": "消费记录信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AdminCreateExpenseRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "创建成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误或类别不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "权限不足",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/expenses/detailed-statistics": {
      "get": {
        "description": "获取详细的消费统计数据，支持按月、按年或自定义时间范围统计，支持多个类别筛选。管理员可按用户ID筛选，非管理员只能查看自己的数据。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-统计"
        ],
        "summary": "获取详细消费统计",
        "parameters": [
          {
            "type": "string",
            "description": "时间范围类型：month(按月)、year(按年)、custom(自定义)",
            "name": "range_type",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "description": "当range_type=month时必填，格式：2024-01",
            "name": "year_month",
            "in": "query"
          },
          {
            "type": "string",
            "description": "当range_type=year时必填，格式：2024",
            "name": "year",
            "in": "query"
          },
          {
            "type": "string",
            "description": "当range_type=custom时必填，格式：2024-01-01",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "当range_type=custom时必填，格式：2024-12-31",
            "name": "end_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "类别筛选，多个类别用逗号分隔，如：餐饮,交通",
            "name": "categories",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "用户ID筛选（仅管理员可用）",
            "name": "user_id",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功，包含总金额、总记录数、类别统计等",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/expenses/{id}": {
      "put": {
        "description": "更新指定的消费记录。管理员可以更新任何记录，非管理员只能更新自己的记录。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-消费记录"
        ],
        "summary": "更新消费记录",
        "parameters": [
          {
            "type": "integer",
            "description": "消费记录ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "更新的消费记录信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AdminUpdateExpenseRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误或类别不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "权限不足",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      },
      "delete": {
        "description": "删除指定的消费记录（软删除）。管理员可以删除任何记录，非管理员只能删除自己的记录。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-消费记录"
        ],
        "summary": "删除消费记录",
        "parameters": [
          {
            "type": "integer",
            "description": "消费记录ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "权限不足",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/export/excel": {
      "get": {
        "description": "根据时间范围导出消费记录为Excel文件",
        "produces": [
          "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
        ],
        "tags": [
          "后台管理-导出"
        ],
        "summary": "导出消费记录为Excel",
        "parameters": [
          {
            "type": "string",
            "description": "开始时间 (YYYY-MM-DD)",
            "name": "start_time",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "description": "结束时间 (YYYY-MM-DD)",
            "name": "end_time",
            "in": "query",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Excel文件",
            "schema": {
              "type": "file"
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/incomes": {
      "get": {
        "description": "获取收入记录列表，支持分页、时间范围、类型、用户名筛选。管理员可查看所有记录并可按用户ID筛选，非管理员只能查看自己的记录。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-收入管理"
        ],
        "summary": "获取收入记录列表",
        "parameters": [
          {
            "type": "integer",
            "description": "页码，默认1",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "每页数量，默认20",
            "name": "page_size",
            "in": "query"
          },
          {
            "type": "string",
            "description": "开始时间 (YYYY-MM-DD)",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "结束时间 (YYYY-MM-DD)",
            "name": "end_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "收入类型筛选",
            "name": "type",
            "in": "query"
          },
          {
            "type": "string",
            "description": "用户名筛选（模糊匹配）",
            "name": "username",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "用户ID筛选（仅管理员可用）",
            "name": "user_id",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功，返回分页数据",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      },
      "post": {
        "description": "创建一条新的收入记录。管理员可以为任何用户创建，非管理员只能为自己创建。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-收入管理"
        ],
        "summary": "创建收入记录",
        "parameters": [
          {
            "description": "收入信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AdminCreateIncomeRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "创建成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误或时间格式错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "权限不足",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/incomes/{id}": {
      "put": {
        "description": "更新指定的收入记录。管理员可以更新任何记录，非管理员只能更新自己的记录。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-收入管理"
        ],
        "summary": "更新收入记录",
        "parameters": [
          {
            "type": "integer",
            "description": "收入记录ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "更新的收入信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AdminUpdateIncomeRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误或时间格式错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "权限不足",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      },
      "delete": {
        "description": "删除指定的收入记录（软删除）。管理员可以删除任何记录，非管理员只能删除自己的记录。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-收入管理"
        ],
        "summary": "删除收入记录",
        "parameters": [
          {
            "type": "integer",
            "description": "收入记录ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "无效的ID",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/login": {
      "post": {
        "description": "管理员使用用户名和密码登录，登录成功后设置 Cookie。只有状态为 active 的用户可以登录。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理"
        ],
        "summary": "管理员登录",
        "parameters": [
          {
            "description": "登录信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AdminLoginRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "登录成功，返回用户信息",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "用户名或密码错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "账号已锁定",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/logout": {
      "post": {
        "description": "清除登录 Cookie，退出登录",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理"
        ],
        "summary": "管理员退出登录",
        "responses": {
          "200": {
            "description": "退出成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/password/admin-reset": {
      "post": {
        "description": "管理员可以直接重置指定用户的密码，无需令牌",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-密码重置"
        ],
        "summary": "管理员重置用户密码",
        "parameters": [
          {
            "description": "重置密码信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AdminResetPasswordRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "密码重置成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/password/request-reset": {
      "post": {
        "description": "通过邮箱请求密码重置，系统会发送包含重置链接的邮件。为了安全，即使用户不存在也返回成功。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-密码重置"
        ],
        "summary": "请求密码重置",
        "parameters": [
          {
            "description": "邮箱地址",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.RequestResetRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "请求成功（无论用户是否存在）",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "500": {
            "description": "邮件发送失败",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/password/reset": {
      "post": {
        "description": "使用有效的重置令牌设置新密码",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-密码重置"
        ],
        "summary": "重置密码",
        "parameters": [
          {
            "description": "重置密码信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.ResetPasswordRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "密码重置成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误或令牌无效",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/password/send-reset-email": {
      "post": {
        "description": "管理员可以为指定用户发送密码重置邮件",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-密码重置"
        ],
        "summary": "管理员发送密码重置邮件",
        "parameters": [
          {
            "description": "用户ID",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "邮件发送成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误或用户未设置邮箱",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "500": {
            "description": "邮件发送失败",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/password/verify-token": {
      "get": {
        "description": "验证密码重置令牌是否有效，返回关联的用户信息",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-密码重置"
        ],
        "summary": "验证重置令牌",
        "parameters": [
          {
            "type": "string",
            "description": "重置令牌",
            "name": "token",
            "in": "query",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "令牌有效，返回用户信息",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "令牌无效、已使用或已过期",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/statistics": {
      "get": {
        "description": "获取支出和收入的统计数据，包括总金额、总记录数、类别统计等。管理员可查看所有数据，非管理员只能查看自己的数据。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-统计"
        ],
        "summary": "获取统计数据",
        "parameters": [
          {
            "type": "string",
            "description": "开始时间 (YYYY-MM-DD)",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "结束时间 (YYYY-MM-DD)",
            "name": "end_time",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/statistics/summary": {
      "get": {
        "description": "按时间范围统计支出总和与收入总和。管理员可传user_id统计指定用户，非管理员只能统计自己的数据（忽略user_id）。不传start_time/end_time则统计全部时间。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-统计"
        ],
        "summary": "获取支出/收入汇总（后台）",
        "parameters": [
          {
            "type": "string",
            "description": "开始时间 (YYYY-MM-DD)，例如 2024-01-01",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "结束时间 (YYYY-MM-DD)，例如 2024-12-31",
            "name": "end_time",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "用户ID（仅管理员可用）",
            "name": "user_id",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功，返回支出总和和收入总和",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/users": {
      "get": {
        "description": "获取系统中所有用户列表（包含软删除的用户）",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-用户管理"
        ],
        "summary": "获取用户列表",
        "responses": {
          "200": {
            "description": "获取成功，返回用户列表",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/users/exit-impersonation": {
      "post": {
        "description": "退出模拟登录，恢复原始管理员身份",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-用户管理"
        ],
        "summary": "退出模拟登录",
        "responses": {
          "200": {
            "description": "退出模拟成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录或未在模拟状态",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/users/impersonate": {
      "post": {
        "description": "管理员可以模拟登录非管理员用户，用于查看用户视角。不能模拟其他管理员。模拟登录后，原始管理员信息会保存在 Cookie 中，可以通过退出模拟恢复。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-用户管理"
        ],
        "summary": "模拟登录用户",
        "parameters": [
          {
            "description": "用户ID",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.ImpersonateUserRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "模拟登录成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "权限不足或不能模拟管理员",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/users/{id}": {
      "delete": {
        "description": "管理员可以删除用户（软删除），不能删除自己",
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-用户管理"
        ],
        "summary": "删除用户",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "不能删除自己",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "权限不足",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/users/{id}/admin": {
      "put": {
        "description": "管理员可以设置或取消其他用户的管理员权限，不能取消自己的管理员权限",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-用户管理"
        ],
        "summary": "设置管理员权限",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "管理员权限设置",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.SetAdminRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "不能取消自己的管理员权限",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "权限不足",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/users/{id}/password": {
      "put": {
        "description": "管理员可以修改指定用户的密码",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "后台管理-用户管理"
        ],
        "summary": "更新用户密码",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "新密码",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.UpdateUserPasswordRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "权限不足",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/admin/users/{id}/status": {
      "put": {
        "description": "管理员可将用户状态设置为 normal(active) 或 locked。只有 active 状态的用户可以登录。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "用户管理"
        ],
        "summary": "更新用户状态",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "状态信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.UpdateUserStatusRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "未登录",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "403": {
            "description": "权限不足",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/api/v1/ai-analysis": {
      "post": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "选择时间范围与AI模型，对当前用户在该时间范围内的消费记录进行AI分析，SSE流式返回 JSON 帧（delta/done/error）。分析结束后会保存到历史记录。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "text/event-stream"
        ],
        "tags": [
          "AI"
        ],
        "summary": "AI分析（流式）",
        "parameters": [
          {
            "description": "分析请求",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AnalysisRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SSE流：data: {\\\"type\\\":\\\"delta\\\",\\\"content\\\":\\\"...\\\"}",
            "schema": {
              "type": "string"
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "403": {
            "description": "账号锁定或无权限",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/ai-analysis/history": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "获取当前用户的AI分析历史记录，按 model_id 分页返回（软删除不返回）。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "AI"
        ],
        "summary": "获取AI分析历史",
        "parameters": [
          {
            "type": "integer",
            "description": "AI模型ID",
            "name": "model_id",
            "in": "query",
            "required": true
          },
          {
            "type": "integer",
            "description": "页码，默认1",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "每页条数，默认20，最大100",
            "name": "page_size",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/ai-analysis/history/{id}": {
      "delete": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "AI"
        ],
        "summary": "删除AI分析历史",
        "parameters": [
          {
            "type": "integer",
            "description": "历史记录ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "403": {
            "description": "无权限",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/ai-chat": {
      "post": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "选择AI模型，与AI进行对话，SSE流式返回 JSON 帧（delta/done/error）。结束后保存聊天记录。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "text/event-stream"
        ],
        "tags": [
          "AI"
        ],
        "summary": "AI聊天（流式）",
        "parameters": [
          {
            "description": "聊天请求",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AIChatRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SSE流：data: {\\\"type\\\":\\\"delta\\\",\\\"content\\\":\\\"...\\\"}",
            "schema": {
              "type": "string"
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/ai-chat/history": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "获取当前用户的AI聊天历史记录，按 model_id 分页返回（软删除不返回）。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "AI"
        ],
        "summary": "获取AI聊天历史",
        "parameters": [
          {
            "type": "integer",
            "description": "AI模型ID",
            "name": "model_id",
            "in": "query",
            "required": true
          },
          {
            "type": "integer",
            "description": "页码，默认1",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "每页条数，默认20，最大100",
            "name": "page_size",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "400": {
            "description": "参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/ai-chat/history/{id}": {
      "delete": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "AI"
        ],
        "summary": "删除AI聊天记录",
        "parameters": [
          {
            "type": "integer",
            "description": "聊天记录ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "403": {
            "description": "无权限",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/ai-models": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "获取系统可用的AI模型配置列表（不包含APIKey），用于前端选择模型。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "AI"
        ],
        "summary": "获取AI模型列表",
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/models.AIModel"
                      }
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "description": "用户登录获取 JWT token",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "认证"
        ],
        "summary": "用户登录",
        "parameters": [
          {
            "description": "登录信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.LoginRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "登录成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/api.LoginResponse"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "用户名或密码错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/auth/password": {
      "put": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "修改当前用户密码",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "认证"
        ],
        "summary": "修改密码",
        "parameters": [
          {
            "description": "密码信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.ChangePasswordRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "修改成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "原密码错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/auth/password/request-reset": {
      "post": {
        "description": "通过邮箱发送密码重置验证码",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "认证"
        ],
        "summary": "App端请求密码重置",
        "parameters": [
          {
            "description": "密码重置请求",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AppRequestPasswordResetRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "验证码已发送",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "429": {
            "description": "请求过于频繁",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/auth/password/reset": {
      "post": {
        "description": "使用验证码重置密码",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "认证"
        ],
        "summary": "App端重置密码",
        "parameters": [
          {
            "description": "重置密码请求",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AppResetPasswordRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "密码重置成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "400": {
            "description": "验证码错误或已过期",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "500": {
            "description": "服务器错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/auth/password/verify-code": {
      "post": {
        "description": "验证密码重置验证码是否正确",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "认证"
        ],
        "summary": "App端验证重置验证码",
        "parameters": [
          {
            "description": "验证请求",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.AppVerifyResetCodeRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "验证成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "400": {
            "description": "验证码错误或已过期",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/auth/profile": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "获取当前登录用户的详细信息",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "认证"
        ],
        "summary": "获取当前用户信息",
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.User"
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "description": "创建新用户账号。注意：新注册用户默认处于“锁定(locked)”状态，需要管理员在后台将状态改为“正常(active)”后才能登录。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "认证"
        ],
        "summary": "用户注册",
        "parameters": [
          {
            "description": "注册信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.RegisterRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "注册成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.User"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "500": {
            "description": "服务器错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/auth/register-verified": {
      "post": {
        "description": "需要先发送验证码，验证通过后创建用户账号。注意：新注册用户默认处于“锁定(locked)”状态，需要管理员在后台将状态改为“正常(active)”后才能登录。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "认证"
        ],
        "summary": "带邮箱验证的用户注册",
        "parameters": [
          {
            "description": "注册信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.RegisterWithVerificationRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "注册成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.User"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或验证码错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "500": {
            "description": "服务器错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/auth/send-code": {
      "post": {
        "description": "发送邮箱验证码用于注册或绑定邮箱",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "认证"
        ],
        "summary": "发送邮箱验证码",
        "parameters": [
          {
            "description": "验证码请求信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.SendVerificationCodeRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "发送成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "500": {
            "description": "服务器错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/auth/verify-code": {
      "post": {
        "description": "验证邮箱验证码是否正确",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "认证"
        ],
        "summary": "验证邮箱验证码",
        "parameters": [
          {
            "description": "验证请求信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.VerifyEmailCodeRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "验证成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "400": {
            "description": "验证码错误或已过期",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/categories": {
      "get": {
        "description": "获取所有可用的消费类别列表，返回完整的类别对象数组。类别按排序字段（sort）升序排列，排序相同时按ID升序排列。\n\n返回的每个类别对象包含以下字段：\n- id (uint): 类别唯一标识符，主键\n- name (string): 类别名称，最大长度50字符，唯一索引，必填\n- sort (int): 排序值，用于控制类别显示顺序，值越小越靠前，默认值为0\n- created_at (time.Time): 创建时间，ISO 8601格式的时间字符串\n- updated_at (time.Time): 更新时间，ISO 8601格式的时间字符串\n\n示例响应：\n{\n\"code\": 200,\n\"message\": \"success\",\n\"data\": [\n{\n\"id\": 1,\n\"name\": \"餐饮\",\n\"sort\": 0,\n\"created_at\": \"2024-01-01T00:00:00Z\",\n\"updated_at\": \"2024-01-01T00:00:00Z\"\n},\n{\n\"id\": 2,\n\"name\": \"交通\",\n\"sort\": 1,\n\"created_at\": \"2024-01-01T00:00:00Z\",\n\"updated_at\": \"2024-01-01T00:00:00Z\"\n}\n]\n}",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "消费记录"
        ],
        "summary": "获取消费类别列表",
        "responses": {
          "200": {
            "description": "获取成功，返回类别列表数组",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/models.ExpenseCategory"
                      }
                    }
                  }
                }
              ]
            }
          },
          "500": {
            "description": "服务器内部错误，查询失败时返回错误信息",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/expenses": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "获取当前用户的消费记录列表，支持分页和筛选",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "消费记录"
        ],
        "summary": "获取消费记录列表",
        "parameters": [
          {
            "type": "integer",
            "default": 1,
            "description": "页码",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "default": 10,
            "description": "每页数量",
            "name": "page_size",
            "in": "query"
          },
          {
            "type": "string",
            "description": "类别筛选",
            "name": "category",
            "in": "query"
          },
          {
            "type": "string",
            "description": "开始时间 (2024-01-01)",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "结束时间 (2024-12-31)",
            "name": "end_time",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/api.PageResponse"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "list": {
                              "type": "array",
                              "items": {
                                "$ref": "#/definitions/models.Expense"
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      },
      "post": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "创建一条新的消费记录",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "消费记录"
        ],
        "summary": "创建消费记录",
        "parameters": [
          {
            "description": "消费记录信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.CreateExpenseRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "创建成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.Expense"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/expenses/detailed-statistics": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "获取消费统计信息，支持多种时间范围筛选（月、年、自定义）和多个类别筛选。返回按类别统计的数据，适合绘制饼图和柱状图。\n\n时间范围类型说明：\n- month: 按月统计，需要传入 year_month 参数（格式：2024-01）\n- year: 按年统计，需要传入 year 参数（格式：2024）\n- custom: 自定义时间范围，需要传入 start_time 和 end_time 参数（格式：2024-01-01）\n\n类别筛选说明：\n- categories: 可选的类别筛选，多个类别用逗号分隔（如：餐饮,交通），不传则统计所有类别\n\n返回数据说明：\n- total_amount: 总金额\n- total_count: 总记录数\n- category_stats: 按类别统计的数组，每个元素包含 category（类别名称）、total（总金额）、count（记录数）、percentage（占比百分比）",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "消费记录"
        ],
        "summary": "获取详细消费统计",
        "parameters": [
          {
            "enum": [
              "month",
              "year",
              "custom"
            ],
            "type": "string",
            "description": "时间范围类型：month（月）/year（年）/custom（自定义）",
            "name": "range_type",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "description": "年月（当range_type=month时必填，格式：2024-01）",
            "name": "year_month",
            "in": "query"
          },
          {
            "type": "string",
            "description": "年份（当range_type=year时必填，格式：2024）",
            "name": "year",
            "in": "query"
          },
          {
            "type": "string",
            "description": "开始时间（当range_type=custom时必填，格式：2024-01-01）",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "结束时间（当range_type=custom时必填，格式：2024-12-31）",
            "name": "end_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "类别筛选，多个类别用逗号分隔（如：餐饮,交通）",
            "name": "categories",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功，返回统计数据和分类统计",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/expenses/statistics": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "获取指定时间范围内的消费统计",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "消费记录"
        ],
        "summary": "获取消费统计",
        "parameters": [
          {
            "type": "string",
            "description": "开始时间 (2024-01-01)",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "结束时间 (2024-12-31)",
            "name": "end_time",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/expenses/{id}": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "根据ID获取消费记录详情",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "消费记录"
        ],
        "summary": "获取单条消费记录",
        "parameters": [
          {
            "type": "integer",
            "description": "消费记录ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.Expense"
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "更新指定的消费记录",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "消费记录"
        ],
        "summary": "更新消费记录",
        "parameters": [
          {
            "type": "integer",
            "description": "消费记录ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "消费记录信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.UpdateExpenseRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.Expense"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      },
      "delete": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "删除指定的消费记录",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "消费记录"
        ],
        "summary": "删除消费记录",
        "parameters": [
          {
            "type": "integer",
            "description": "消费记录ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/export/csv": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "根据时间范围导出消费记录为 CSV 文件",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "text/csv"
        ],
        "tags": [
          "导出"
        ],
        "summary": "导出消费记录",
        "parameters": [
          {
            "type": "string",
            "description": "开始时间 (2024-01-01)",
            "name": "start_time",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "description": "结束时间 (2024-12-31)",
            "name": "end_time",
            "in": "query",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "CSV 文件",
            "schema": {
              "type": "file"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/export/json": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "根据时间范围导出消费记录为 JSON 格式",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "导出"
        ],
        "summary": "导出消费记录为 JSON",
        "parameters": [
          {
            "type": "string",
            "description": "开始时间 (2024-01-01)",
            "name": "start_time",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "description": "结束时间 (2024-12-31)",
            "name": "end_time",
            "in": "query",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "导出成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/models.Expense"
                      }
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/incomes": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "获取当前用户的收入列表，支持分页与筛选",
        "produces": [
          "application/json"
        ],
        "tags": [
          "收入"
        ],
        "summary": "获取收入列表",
        "parameters": [
          {
            "type": "integer",
            "default": 1,
            "description": "页码",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "default": 10,
            "description": "每页数量",
            "name": "page_size",
            "in": "query"
          },
          {
            "type": "string",
            "description": "收入类型筛选",
            "name": "type",
            "in": "query"
          },
          {
            "type": "string",
            "description": "开始时间 (2024-01-01)",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "结束时间 (2024-12-31)",
            "name": "end_time",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/api.PageResponse"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "list": {
                              "type": "array",
                              "items": {
                                "$ref": "#/definitions/models.Income"
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      },
      "post": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "创建一条新的收入记录",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "收入"
        ],
        "summary": "创建收入",
        "parameters": [
          {
            "description": "收入信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.CreateIncomeRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "创建成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.Income"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/incomes/{id}": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "根据ID获取收入详情",
        "produces": [
          "application/json"
        ],
        "tags": [
          "收入"
        ],
        "summary": "获取单条收入",
        "parameters": [
          {
            "type": "integer",
            "description": "收入ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.Income"
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "更新指定的收入记录",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "收入"
        ],
        "summary": "更新收入",
        "parameters": [
          {
            "type": "integer",
            "description": "收入ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "收入信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.UpdateIncomeRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.Income"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      },
      "delete": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "删除指定的收入记录",
        "produces": [
          "application/json"
        ],
        "tags": [
          "收入"
        ],
        "summary": "删除收入",
        "parameters": [
          {
            "type": "integer",
            "description": "收入ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          },
          "404": {
            "description": "记录不存在",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    },
    "/api/v1/statistics/summary": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "按时间范围统计当前用户的支出总和与收入总和。不传 start_time/end_time 则统计全部时间。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "统计"
        ],
        "summary": "获取支出/收入汇总",
        "parameters": [
          {
            "type": "string",
            "description": "开始时间 (YYYY-MM-DD)，例如 2024-01-01",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "description": "结束时间 (YYYY-MM-DD)，例如 2024-12-31",
            "name": "end_time",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/api.Response"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/api.IncomeExpenseSummaryResponse"
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "$ref": "#/definitions/api.Response"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "api.AIChatRequest": {
      "type": "object",
      "required": [
        "message",
        "model_id"
      ],
      "properties": {
        "message": {
          "type": "string",
          "minLength": 1
        },
        "model_id": {
          "type": "integer"
        }
      }
    },
    "api.AdminCreateExpenseRequest": {
      "type": "object",
      "required": [
        "amount",
        "category",
        "expense_time",
        "user_id"
      ],
      "properties": {
        "amount": {
          "type": "number"
        },
        "category": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "expense_time": {
          "description": "格式: 2006-01-02 15:04:05",
          "type": "string"
        },
        "user_id": {
          "type": "integer"
        }
      }
    },
    "api.AdminCreateIncomeRequest": {
      "type": "object",
      "required": [
        "amount",
        "income_time",
        "type",
        "user_id"
      ],
      "properties": {
        "amount": {
          "type": "number"
        },
        "income_time": {
          "description": "2006-01-02 15:04:05",
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "user_id": {
          "type": "integer"
        }
      }
    },
    "api.AdminLoginRequest": {
      "type": "object",
      "required": [
        "password",
        "username"
      ],
      "properties": {
        "password": {
          "type": "string"
        },
        "username": {
          "type": "string"
        }
      }
    },
    "api.AdminResetPasswordRequest": {
      "type": "object",
      "required": [
        "new_password",
        "user_id"
      ],
      "properties": {
        "new_password": {
          "type": "string",
          "minLength": 6
        },
        "user_id": {
          "type": "integer"
        }
      }
    },
    "api.AdminUpdateExpenseRequest": {
      "type": "object",
      "properties": {
        "amount": {
          "type": "number"
        },
        "category": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "expense_time": {
          "description": "格式: 2006-01-02 15:04:05",
          "type": "string"
        }
      }
    },
    "api.AdminUpdateIncomeRequest": {
      "type": "object",
      "properties": {
        "amount": {
          "type": "number"
        },
        "income_time": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      }
    },
    "api.AnalysisRequest": {
      "type": "object",
      "required": [
        "end_time",
        "model_id",
        "start_time"
      ],
      "properties": {
        "end_time": {
          "type": "string",
          "example": "2024-12-31"
        },
        "model_id": {
          "type": "integer"
        },
        "start_time": {
          "type": "string",
          "example": "2024-01-01"
        },
        "user_id": {
          "description": "可选，仅管理员可用，用于筛选指定用户的账单",
          "type": "integer",
          "example": 1
        }
      }
    },
    "api.AppRequestPasswordResetRequest": {
      "type": "object",
      "required": [
        "email"
      ],
      "properties": {
        "email": {
          "type": "string",
          "example": "test@example.com"
        }
      }
    },
    "api.AppResetPasswordRequest": {
      "type": "object",
      "required": [
        "code",
        "email",
        "new_password"
      ],
      "properties": {
        "code": {
          "type": "string",
          "example": "123456"
        },
        "email": {
          "type": "string",
          "example": "test@example.com"
        },
        "new_password": {
          "type": "string",
          "minLength": 6,
          "example": "newpassword123"
        }
      }
    },
    "api.AppVerifyResetCodeRequest": {
      "type": "object",
      "required": [
        "code",
        "email"
      ],
      "properties": {
        "code": {
          "type": "string",
          "example": "123456"
        },
        "email": {
          "type": "string",
          "example": "test@example.com"
        }
      }
    },
    "api.CategoryCreateRequest": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "color": {
          "description": "颜色代码，如 #ef4444",
          "type": "string",
          "maxLength": 20
        },
        "name": {
          "type": "string",
          "maxLength": 50,
          "minLength": 1
        },
        "sort": {
          "type": "integer"
        }
      }
    },
    "api.CategoryUpdateRequest": {
      "type": "object",
      "properties": {
        "color": {
          "type": "string",
          "maxLength": 20
        },
        "name": {
          "type": "string",
          "maxLength": 50,
          "minLength": 1
        },
        "sort": {
          "type": "integer"
        }
      }
    },
    "api.ChangePasswordRequest": {
      "type": "object",
      "required": [
        "new_password",
        "old_password"
      ],
      "properties": {
        "new_password": {
          "type": "string",
          "maxLength": 50,
          "minLength": 6,
          "example": "newpassword123"
        },
        "old_password": {
          "type": "string",
          "example": "oldpassword123"
        }
      }
    },
    "api.CreateAIModelRequest": {
      "type": "object",
      "required": [
        "api_key",
        "base_url",
        "name"
      ],
      "properties": {
        "api_key": {
          "type": "string",
          "minLength": 1,
          "example": "sk-..."
        },
        "base_url": {
          "type": "string",
          "example": "https://api.openai.com/v1"
        },
        "name": {
          "type": "string",
          "maxLength": 100,
          "minLength": 1,
          "example": "OpenAI GPT-4"
        }
      }
    },
    "api.CreateExpenseRequest": {
      "type": "object",
      "required": [
        "amount",
        "category",
        "expense_time"
      ],
      "properties": {
        "amount": {
          "type": "number",
          "example": 99.99
        },
        "category": {
          "type": "string",
          "example": "餐饮"
        },
        "description": {
          "type": "string",
          "example": "午餐"
        },
        "expense_time": {
          "type": "string",
          "example": "2024-01-15 12:30:00"
        }
      }
    },
    "api.CreateIncomeRequest": {
      "type": "object",
      "required": [
        "amount",
        "income_time",
        "type"
      ],
      "properties": {
        "amount": {
          "type": "number",
          "example": 5000
        },
        "income_time": {
          "type": "string",
          "example": "2024-01-15 09:00:00"
        },
        "type": {
          "type": "string",
          "example": "工资"
        }
      }
    },
    "api.ImpersonateUserRequest": {
      "type": "object",
      "required": [
        "user_id"
      ],
      "properties": {
        "user_id": {
          "type": "integer"
        }
      }
    },
    "api.IncomeExpenseSummaryResponse": {
      "type": "object",
      "properties": {
        "total_expense": {
          "description": "支出总和",
          "type": "number",
          "example": 123.45
        },
        "total_income": {
          "description": "收入总和",
          "type": "number",
          "example": 5000
        }
      }
    },
    "api.LoginRequest": {
      "type": "object",
      "required": [
        "password",
        "username"
      ],
      "properties": {
        "password": {
          "type": "string",
          "example": "password123"
        },
        "username": {
          "type": "string",
          "example": "testuser"
        }
      }
    },
    "api.LoginResponse": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        },
        "user_info": {
          "$ref": "#/definitions/models.User"
        }
      }
    },
    "api.PageResponse": {
      "type": "object",
      "properties": {
        "list": {},
        "page": {
          "type": "integer"
        },
        "page_size": {
          "type": "integer"
        },
        "total": {
          "type": "integer"
        }
      }
    },
    "api.RegisterRequest": {
      "type": "object",
      "required": [
        "password",
        "username"
      ],
      "properties": {
        "email": {
          "type": "string",
          "example": "test@example.com"
        },
        "password": {
          "type": "string",
          "maxLength": 50,
          "minLength": 6,
          "example": "password123"
        },
        "username": {
          "type": "string",
          "maxLength": 50,
          "minLength": 3,
          "example": "testuser"
        }
      }
    },
    "api.RegisterWithVerificationRequest": {
      "type": "object",
      "required": [
        "code",
        "email",
        "password",
        "username"
      ],
      "properties": {
        "code": {
          "type": "string",
          "example": "123456"
        },
        "email": {
          "type": "string",
          "example": "test@example.com"
        },
        "password": {
          "type": "string",
          "maxLength": 50,
          "minLength": 6,
          "example": "password123"
        },
        "username": {
          "type": "string",
          "maxLength": 50,
          "minLength": 3,
          "example": "testuser"
        }
      }
    },
    "api.RequestResetRequest": {
      "type": "object",
      "required": [
        "email"
      ],
      "properties": {
        "email": {
          "type": "string"
        }
      }
    },
    "api.ResetPasswordRequest": {
      "type": "object",
      "required": [
        "new_password",
        "token"
      ],
      "properties": {
        "new_password": {
          "type": "string",
          "minLength": 6
        },
        "token": {
          "type": "string"
        }
      }
    },
    "api.Response": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer"
        },
        "data": {},
        "message": {
          "type": "string"
        }
      }
    },
    "api.SendVerificationCodeRequest": {
      "type": "object",
      "required": [
        "email",
        "type"
      ],
      "properties": {
        "email": {
          "type": "string",
          "example": "test@example.com"
        },
        "type": {
          "description": "register: 注册, bind: 绑定邮箱",
          "type": "string",
          "enum": [
            "register",
            "bind"
          ],
          "example": "register"
        }
      }
    },
    "api.SetAdminRequest": {
      "type": "object",
      "properties": {
        "is_admin": {
          "type": "boolean"
        }
      }
    },
    "api.UpdateAIModelRequest": {
      "type": "object",
      "properties": {
        "api_key": {
          "type": "string",
          "minLength": 1
        },
        "base_url": {
          "type": "string"
        },
        "name": {
          "type": "string",
          "maxLength": 100,
          "minLength": 1
        }
      }
    },
    "api.UpdateExpenseRequest": {
      "type": "object",
      "properties": {
        "amount": {
          "type": "number",
          "example": 99.99
        },
        "category": {
          "type": "string",
          "example": "餐饮"
        },
        "description": {
          "type": "string",
          "example": "午餐"
        },
        "expense_time": {
          "type": "string",
          "example": "2024-01-15 12:30:00"
        }
      }
    },
    "api.UpdateIncomeRequest": {
      "type": "object",
      "properties": {
        "amount": {
          "type": "number"
        },
        "income_time": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      }
    },
    "api.UpdateUserPasswordRequest": {
      "type": "object",
      "required": [
        "new_password"
      ],
      "properties": {
        "new_password": {
          "type": "string",
          "minLength": 6
        }
      }
    },
    "api.UpdateUserStatusRequest": {
      "type": "object",
      "required": [
        "status"
      ],
      "properties": {
        "status": {
          "description": "Status 用户状态：active（正常）/ locked（锁定）",
          "type": "string",
          "enum": [
            "active",
            "locked"
          ]
        }
      }
    },
    "api.VerifyEmailCodeRequest": {
      "type": "object",
      "required": [
        "code",
        "email",
        "type"
      ],
      "properties": {
        "code": {
          "type": "string",
          "example": "123456"
        },
        "email": {
          "type": "string",
          "example": "test@example.com"
        },
        "type": {
          "type": "string",
          "enum": [
            "register",
            "bind"
          ],
          "example": "register"
        }
      }
    },
    "models.AIModel": {
      "type": "object",
      "properties": {
        "base_url": {
          "description": "调用地址",
          "type": "string"
        },
        "created_at": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "name": {
          "description": "模型名称",
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        }
      }
    },
    "models.Expense": {
      "type": "object",
      "properties": {
        "amount": {
          "type": "number"
        },
        "category": {
          "type": "string"
        },
        "created_at": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "expense_time": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "updated_at": {
          "type": "string"
        },
        "user_id": {
          "type": "integer"
        }
      }
    },
    "models.ExpenseCategory": {
      "type": "object",
      "properties": {
        "color": {
          "description": "颜色代码，如 #ef4444",
          "type": "string"
        },
        "created_at": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "name": {
          "type": "string"
        },
        "sort": {
          "type": "integer"
        },
        "updated_at": {
          "type": "string"
        }
      }
    },
    "models.Income": {
      "type": "object",
      "properties": {
        "amount": {
          "type": "number"
        },
        "created_at": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "income_time": {
          "type": "string"
        },
        "type": {
          "description": "收入类型",
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        },
        "user_id": {
          "type": "integer"
        }
      }
    },
    "models.User": {
      "type": "object",
      "properties": {
        "created_at": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "is_admin": {
          "description": "是否为管理员",
          "type": "boolean"
        },
        "status": {
          "description": "用户状态：locked/active",
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        },
        "username": {
          "type": "string"
        }
      }
    }
  },
  "securityDefinitions": {
    "BearerAuth": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    }
  }
}